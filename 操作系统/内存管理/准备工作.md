# 什么是内存管理？
## 存储器的多层结构
- CPU寄存器 
  - 寄存器
- 主存(广义)
  - 高速缓存: L1、L2、L3缓存，多级缓存越大，CPU运行效率越高
  - 主存储器: 狭义上的主存(即内存条)
  - 硬盘缓存: 进程被挂起以后被放置的交换区，物理上仍然属于硬盘
- 辅存
  - 固定磁盘
  - 可移动存储介质(U盘、软盘、光盘等)

## 程序的装入
- 绝对装入: 直接通过物理(绝对)地址装入程序，只有单道程序可以确认物理地址，对程序员要求过高，现在不可能这么做了
- 可重定位装入: 在指定的绝对地址已经存储时，往后顺延存储，适用于多道程序
- 动态运行时装入: 程序和数据可能被分配到**不连续**的内存中，cache不友好

## 进程运行的基本原理
- 用户程序 -> 进程
    - 编译: 由用户(编译器)来完成
    - 链接
        - 静态链接: 在程序运行前就已经完成了链接，lib文件
        - 装入时动态链接: dll文件
        - 运行时动态链接: dll文件，如果os发现程序缺页时执行
    - 装入

## 两个细节：
- 逻辑地址与物理地址: 程序中的地址叫逻辑地址，内存条上的位置就是物理地址，将逻辑地址转换为物理地址的过程叫做**地址重定位**
- 内存保护: 装入当前程序的过程中，保证此地址不受其他用户影响，通过记录和比较实现，记录方式:
  - 记录两个物理地址：在CPU中设置一个上限寄存器和一个下限寄存器
  - 记录一个物理地址和一个逻辑地址：记录物理地址的最小值和逻辑地址的最大值

## 内存扩充(动态链接)的两种方式：
- 覆盖: 将覆盖区的内存替换
- 交换: 将访问频率不高的文件交换到磁盘缓存上