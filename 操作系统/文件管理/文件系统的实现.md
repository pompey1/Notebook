# 文件系统是怎么管理的？
## 文件系统的层次结构
- 用户调用接口
- 文件目录系统
- 存取控制验证模块
- 逻辑文件系统与文件信息缓冲区
- 物理文件系统
- 辅助分配模块
- 设备管理程序模块

## 目录实现
- 线性列表
- 哈希表
> 可以直接把要存储的信息设置为key，通过哈希算法可以直接定位到信息的物理地址

> 不同的key通过哈希算法压缩以后肯能会得到相同的value，这时候就会出现哈希冲突，解决办法[数据结构：哈希表](../../数据结构与算法/哈希表.md)

## 文件实现
- 文件分配方式
  - 连续分配：（数组）支持顺序和直接访问，速度快；不方便扩展，会产生磁盘碎片（不能找空闲的位置随地使用盘块）
  - 链接分配：（链表）支持顺序访问，方便扩展，没有碎片；不支持直接访问，访问效率偏低。（显式链接直接将指针存储在硬盘中，而隐式链接将所有指针提取出来并且做成一张文件分配表FAT，整个磁盘只有一个文件分配表，要读取数据时会将它加载到内存中使用，使得链接分配的文件能够支持随机访问，也是空间换时间的案例）
> 随机访问 = 直接访问
  - **索引分配**：拥有显式链接分配所有的优点，但是需要在硬盘中存储索引表，假设一个盘块的大小是4KB，一个索引表只能表示4MB大小的文件，所以需要用到多级索引表（类似分页存储）、链接索引表等方法
- 文件存储空间管理
    - 空闲表法
    - 空闲链接法
    - 成组链接法
    - 位示图法